diff -pruN ruby-1.8.6-p230.orig/array.c ruby-1.8.6-p230/array.c
--- ruby-1.8.6-p230.orig/array.c	2008-07-01 16:32:12.000000000 +0900
+++ ruby-1.8.6-p230/array.c	2008-07-01 16:34:01.000000000 +0900
@@ -2272,7 +2272,7 @@ rb_ary_fill(argc, argv, ary)
 	break;
     }
     rb_ary_modify(ary);
-    if (len > ARY_MAX_SIZE - beg) {
+    if (beg >= ARY_MAX_SIZE || len > ARY_MAX_SIZE - beg) {
 	rb_raise(rb_eArgError, "argument too big");
     }
     end = beg + len;
