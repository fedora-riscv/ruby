From 623162ad2bb3b589bddcc32616492a2bc4651726 Mon Sep 17 00:00:00 2001
From: Hiroshi SHIBATA <hsbt@ruby-lang.org>
Date: Tue, 22 Feb 2022 11:58:54 +0900
Subject: [PATCH] Resolve cleaned-up error with temporary gemhome

---
 test/rubygems/test_gem_commands_setup_command.rb | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/test/rubygems/test_gem_commands_setup_command.rb b/test/rubygems/test_gem_commands_setup_command.rb
index 5cf94a1dc99..934c76b1d1a 100644
--- a/test/rubygems/test_gem_commands_setup_command.rb
+++ b/test/rubygems/test_gem_commands_setup_command.rb
@@ -274,6 +274,8 @@ def test_install_default_bundler_gem_with_destdir_flag
     spec.executables.each do |e|
       assert_path_exist File.join destdir, @gemhome.gsub(/^[a-zA-Z]:/, ''), 'gems', spec.full_name, spec.bindir, e
     end
+  ensure
+    FileUtils.chmod "+w", @gemhome
   end
 
   def test_install_default_bundler_gem_with_destdir_and_prefix_flags
